---
/**
 * Comprehensive Schema.org Structured Data Markup
 * Provides JSON-LD for better SEO and rich results
 */

export interface BreadcrumbItem {
  name: string;
  url: string;
}

export interface FAQItem {
  question: string;
  answer: string;
}

export interface Props {
  type?: 'organization' | 'localbusiness' | 'service' | 'article' | 'breadcrumb' | 'faq' | 'attorney';
  data?: Record<string, string | number | boolean | BreadcrumbItem[] | FAQItem[] | undefined>;
}

const { type = 'organization', data = {} } = Astro.props;

// Base schema data
const baseData = {
  organization: {
    '@context': 'https://schema.org',
    '@type': 'LegalService',
    '@id': 'https://yplawfirm.vn/#organization',
    name: 'Công ty Luật TNHH Youth & Partners',
    legalName: 'CÔNG TY LUẬT TNHH YOUTH AND PARTNERS',
    alternateName: ['Youth & Partners Law Firm', 'Y&P Law Firm', 'Luật Youth & Partners', 'YP Law Firm'],
    description: 'Công ty Luật TNHH Youth & Partners là một trong những công ty luật hàng đầu trong các lĩnh vực: Tư vấn pháp lý thường xuyên cho doanh nghiệp, Tư vấn và giải quyết tranh chấp lao động, Dịch vụ Luật sư riêng tiếng Nhật, Anh, Trung, Hàn.',
    url: 'https://yplawfirm.vn',
    logo: {
      '@type': 'ImageObject',
      '@id': 'https://yplawfirm.vn/#logo',
      url: 'https://yplawfirm.vn/assets/images/logo-square.jpg',
      contentUrl: 'https://yplawfirm.vn/assets/images/logo-square.jpg',
      width: 512,
      height: 512,
      caption: 'Youth & Partners Law Firm Logo',
    },
    image: {
      '@type': 'ImageObject',
      '@id': 'https://yplawfirm.vn/#image',
      url: 'https://yplawfirm.vn/assets/images/logo-square.jpg',
      contentUrl: 'https://yplawfirm.vn/assets/images/logo-square.jpg',
      width: 512,
      height: 512,
    },
    sameAs: [
      'https://www.facebook.com/yplawfirm',
      'https://www.linkedin.com/company/yplawfirm',
      'https://www.youtube.com/@YPLawFirmOfficial',
    ],
    knowsLanguage: ['vi', 'en', 'ja', 'zh', 'ko'],
    contactPoint: {
      '@type': 'ContactPoint',
      contactType: 'Customer Service',
      telephone: '+84-88-995-6888',
      email: 'contact@yplawfirm.vn',
      areaServed: 'VN',
      availableLanguage: ['vi', 'en', 'ja', 'zh', 'ko'],
    },
    address: {
      '@type': 'PostalAddress',
      streetAddress: 'P219, Tháp Đông, Chung cư Học viện Quốc Phòng, phường Nghĩa Đô',
      addressLocality: 'Phường Nghĩa Đô',
      addressRegion: 'Hà Nội',
      addressCountry: 'VN',
      postalCode: '100000',
    },
    geo: {
      '@type': 'GeoCoordinates',
      latitude: 21.0478,
      longitude: 105.8007,
    },
    founder: {
      '@type': 'Person',
      name: 'Luật sư Nguyễn Văn Thành',
    },
    foundingDate: '2019',
    areaServed: {
      '@type': 'Country',
      name: 'Vietnam',
    },
    priceRange: '$',
    openingHoursSpecification: [
      {
        '@type': 'OpeningHoursSpecification',
        dayOfWeek: ['Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday'],
        opens: '08:00',
        closes: '17:30',
      },
      {
        '@type': 'OpeningHoursSpecification',
        dayOfWeek: ['Saturday'],
        opens: '08:00',
        closes: '12:00',
      },
    ],
    // Chi nhánh Bắc Ninh & Phú Thọ
    department: [
      {
        '@type': 'LegalService',
        name: 'Y&P Law Firm - Chi nhánh Bắc Ninh',
        address: {
          '@type': 'PostalAddress',
          streetAddress: 'Số 26 Đoàn Trần Nghiệp, phường Kinh Bắc',
          addressLocality: 'Phường Kinh Bắc',
          addressRegion: 'Bắc Ninh',
          addressCountry: 'VN',
        },
        telephone: '+84-88-995-6888',
        openingHoursSpecification: [
          {
            '@type': 'OpeningHoursSpecification',
            dayOfWeek: ['Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday'],
            opens: '08:00',
            closes: '17:30',
          },
          {
            '@type': 'OpeningHoursSpecification',
            dayOfWeek: ['Saturday'],
            opens: '08:00',
            closes: '12:00',
          },
        ],
      },
      {
        '@type': 'LegalService',
        name: 'Y&P Law Firm - Chi nhánh Phú Thọ',
        address: {
          '@type': 'PostalAddress',
          streetAddress: 'Số 170, đường Nguyễn Văn Linh, phường Vĩnh Phúc',
          addressLocality: 'Phường Vĩnh Phúc',
          addressRegion: 'Phú Thọ',
          addressCountry: 'VN',
        },
        telephone: '+84-88-995-6888',
        openingHoursSpecification: [
          {
            '@type': 'OpeningHoursSpecification',
            dayOfWeek: ['Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday'],
            opens: '08:00',
            closes: '17:30',
          },
          {
            '@type': 'OpeningHoursSpecification',
            dayOfWeek: ['Saturday'],
            opens: '08:00',
            closes: '12:00',
          },
        ],
      },
    ],
    // Tổ chức con - Luật Sư Miền Bắc (luatsumienbac.vn)
    subOrganization: {
      '@type': 'LegalService',
      '@id': 'https://luatsumienbac.vn/#organization',
      name: 'Luật Sư Miền Bắc',
      legalName: 'Luật Sư Miền Bắc - Chi nhánh Công ty Luật TNHH Youth & Partners',
      alternateName: ['Luật Sư Miền Bắc', 'LSMB', 'Northern Lawyers Vietnam'],
      url: 'https://luatsumienbac.vn',
      description: 'Chi nhánh miền Bắc của Công ty Luật TNHH Youth & Partners - Cung cấp dịch vụ tư vấn pháp luật, giải quyết tranh chấp, đại diện pháp lý chuyên nghiệp tại 15 tỉnh thành phía Bắc Việt Nam.',
      telephone: '+84-88-995-6888',
      email: 'contact@luatsumienbac.vn',
      knowsLanguage: ['vi', 'en', 'ja', 'zh', 'ko'],
      parentOrganization: {
        '@type': 'LegalService',
        '@id': 'https://yplawfirm.vn/#organization',
        name: 'Công ty Luật TNHH Youth & Partners',
        url: 'https://yplawfirm.vn',
      },
      areaServed: [
        { '@type': 'AdministrativeArea', name: 'Miền Bắc Việt Nam' },
        { '@type': 'State', name: 'Hà Nội' },
        { '@type': 'State', name: 'Hải Phòng' },
        { '@type': 'State', name: 'Bắc Ninh' },
        { '@type': 'State', name: 'Hưng Yên' },
        { '@type': 'State', name: 'Ninh Bình' },
        { '@type': 'State', name: 'Phú Thọ' },
        { '@type': 'State', name: 'Tuyên Quang' },
        { '@type': 'State', name: 'Lào Cai' },
        { '@type': 'State', name: 'Lai Châu' },
        { '@type': 'State', name: 'Điện Biên' },
        { '@type': 'State', name: 'Lạng Sơn' },
        { '@type': 'State', name: 'Cao Bằng' },
        { '@type': 'State', name: 'Sơn La' },
        { '@type': 'State', name: 'Thái Nguyên' },
        { '@type': 'State', name: 'Quảng Ninh' },
      ],
    },
  },

  localbusiness: {
    '@context': 'https://schema.org',
    '@type': 'LegalService',
    '@id': 'https://yplawfirm.vn/#localbusiness',
    name: 'Công ty Luật TNHH Youth & Partners',
    image: 'https://yplawfirm.vn/assets/images/logo-square.jpg',
    description: 'Công ty luật cung cấp các dịch vụ pháp lý chuyên nghiệp tại Hà Nội, Việt Nam.',
    address: {
      '@type': 'PostalAddress',
      streetAddress: 'P219, Tháp Đông, Chung cư Học viện Quốc Phòng, phường Nghĩa Đô',
      addressLocality: 'Quận Cầu Giấy',
      addressRegion: 'Hà Nội',
      addressCountry: 'VN',
      postalCode: '100000',
    },
    geo: {
      '@type': 'GeoCoordinates',
      latitude: 21.0478,
      longitude: 105.8007,
    },
    telephone: '+84-88-995-6888',
    email: 'contact@yplawfirm.vn',
    priceRange: '$',
    openingHoursSpecification: [
      {
        '@type': 'OpeningHoursSpecification',
        dayOfWeek: ['Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday'],
        opens: '08:00',
        closes: '17:30',
      },
      {
        '@type': 'OpeningHoursSpecification',
        dayOfWeek: ['Saturday'],
        opens: '08:00',
        closes: '12:00',
      },
    ],
  },

  service: {
    '@context': 'https://schema.org',
    '@type': 'Service',
    name: data.title || 'Legal Service',
    description: data.description || '',
    serviceType: 'Legal Consultation',
    provider: {
      '@type': 'LegalService',
      name: 'Youth & Partners Law Firm',
      url: 'https://yplawfirm.vn',
    },
    areaServed: 'VN',
    ...(data.rating && {
      aggregateRating: {
        '@type': 'AggregateRating',
        ratingValue: data.rating,
        bestRating: 5,
        ratingCount: data.ratingCount || 100,
      },
    }),
  },

  article: {
    '@context': 'https://schema.org',
    '@type': 'Article',
    headline: data.title || '',
    description: data.excerpt || '',
    image: data.image || 'https://yplawfirm.vn/assets/images/logo-square.jpg',
    datePublished: data.publishDate || new Date().toISOString(),
    ...(data.updateDate && { dateModified: data.updateDate }),
    author: {
      '@type': 'Person',
      name: data.author || 'Youth & Partners',
      url: data.authorUrl || 'https://yplawfirm.vn',
    },
    publisher: {
      '@type': 'LegalService',
      '@id': 'https://yplawfirm.vn/#organization',
      name: 'Công ty Luật TNHH Youth & Partners',
      logo: {
        '@type': 'ImageObject',
        url: 'https://yplawfirm.vn/assets/images/logo-square.jpg',
        width: 512,
        height: 512,
      },
    },
    ...(data.readingTime && {
      timeRequired: `PT${Math.ceil(Number(data.readingTime) * 0.4)}S`,
    }),
  },

  breadcrumb: {
    '@context': 'https://schema.org',
    '@type': 'BreadcrumbList',
    itemListElement: (data.items as BreadcrumbItem[] | undefined)?.map((item: BreadcrumbItem, index: number) => ({
      '@type': 'ListItem',
      position: index + 1,
      name: item.name,
      item: item.url,
    })) || [],
  },

  faq: {
    '@context': 'https://schema.org',
    '@type': 'FAQPage',
    mainEntity: (data.items as FAQItem[] | undefined)?.map((item: FAQItem) => ({
      '@type': 'Question',
      name: item.question,
      acceptedAnswer: {
        '@type': 'Answer',
        text: item.answer,
      },
    })) || [],
  },

  attorney: {
    '@context': 'https://schema.org',
    '@type': 'Attorney',
    name: data.name || '',
    jobTitle: data.jobTitle || 'Luật sư',
    description: data.description || '',
    image: data.image || '',
    worksFor: {
      '@type': 'LegalService',
      '@id': 'https://yplawfirm.vn/#organization',
      name: 'Công ty Luật TNHH Youth & Partners',
      url: 'https://yplawfirm.vn',
    },
    contactPoint: {
      '@type': 'ContactPoint',
      contactType: 'Consultation',
      telephone: '+84-88-995-6888',
      email: 'contact@yplawfirm.vn',
    },
    ...(data.areaOfPractice && {
      knowsAbout: data.areaOfPractice,
    }),
  },
};

const schemaData = baseData[type as keyof typeof baseData] || baseData.organization;
const mergedSchema = { ...schemaData, ...data };
---

<Fragment set:html={`<script type="application/ld+json">${JSON.stringify(mergedSchema)}</script>`} />
